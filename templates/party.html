{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BattleRoster | {{ view_title }}</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="{% url 'home' %}">
        <img src="{% static 'images/battleroster-logo.png' %}" alt="BattleRoster Logo" id="battleroster-logo">
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse justify-content-end" id="navMenu">
        <ul class="navbar-nav">
          <li class="nav-item"><a class="nav-link" href="{% url 'characters' %}">Characters</a></li>
          {% if user.is_authenticated %}
            <li class="nav-item"><a class="nav-link" href="{% url 'party-player' %}">Party</a></li>
            <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
          {% else %}
            <li class="nav-item"><a class="nav-link" href="{% url 'signup-login' %}">Sign-up / Log-in</a></li>
          {% endif %}
          <li class="nav-item"><a class="nav-link" href="{% url 'contact' %}">Contact</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container py-5">
    <h1 class="text-center mb-4">{{ view_title }}</h1>

    {% if role == "player" %}
      <p class="lead text-center">Manage your characters below:</p>
      <div class="table-responsive">
        <table class="table table-dark table-striped">
          <thead><tr><th>Name</th><th>Level</th><th>Health</th><th>Mana</th></tr></thead>
          <tbody>
            {% for char in characters %}
              <tr>
                <td>{{ char.name }}</td>
                <td>{{ char.level }}</td>
                <td>{{ char.health }}</td>
                <td>{{ char.mana }}</td>
              </tr>
            {% empty %}
              <tr><td colspan="4" class="text-center">No characters yet.</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    {% elif role == "dungeon_master" %}
      {% if error %}
        <div class="alert alert-warning text-center">{{ error }}</div>
      {% else %}
        <p class="lead text-center">Manage members of <strong>{{ party.name }}</strong> below:</p>
        <div class="table-responsive">
          <table class="table table-dark table-striped">
            <thead><tr><th>Player</th><th>Character</th><th>Level</th><th>Health</th><th>Mana</th></tr></thead>
            <tbody>
              {% for member in members %}
                <tr>
                  <td>{{ member.player.username }}</td>
                  <td>{{ member.name }}</td>
                  <td>{{ member.level }}</td>
                  <td>{{ member.health }}</td>
                  <td>{{ member.mana }}</td>
                </tr>
              {% empty %}
                <tr><td colspan="5" class="text-center">No members in this party yet.</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      {% endif %}
    {% endif %}
  </div>

  <!-- Footer -->
  <footer class="text-center py-3 bg-dark border-top border-secondary">
    <p class="mb-0">Â© 2025 BattleRoster</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
