{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container mt-4">
  <h2 class="mb-3">Your Characters</h2>

  {% if guest_mode %}
  <div class="alert alert-warning" role="alert">
    <strong>Guest Mode:</strong> You can create one test character, but saving or managing characters
    requires <a href="{% url 'signup_login' %}" class="alert-link">logging in</a>.
  </div>
  {% endif %}

  <!-- Character Creation Form -->
  <div class="card mb-4">
    <div class="card-header">
      <h5 class="mb-0">Create a New Character</h5>
    </div>
    <div class="card-body">
      <form method="POST" class="row g-3">
        {% csrf_token %}
        <div class="col-md-6">
          <label for="name" class="form-label">Name</label>
          <input type="text" name="name" id="name" class="form-control" placeholder="Aragorn" required>
        </div>
        <div class="col-md-3">
          <label for="level" class="form-label">Level</label>
          <input type="number" name="level" id="level" class="form-control" value="1" min="1" required>
        </div>
        <div class="col-md-3">
          <label for="health" class="form-label">Health</label>
          <input type="number" name="health" id="health" class="form-control" value="10" min="1" required>
        </div>
        <div class="col-md-3">
          <label for="mana" class="form-label">Mana</label>
          <input type="number" name="mana" id="mana" class="form-control" value="5" min="0" required>
        </div>

        <div class="col-12">
          {% if guest_mode %}
          <button type="submit" class="btn btn-secondary" disabled>Login to Save Character</button>
          {% else %}
          <button type="submit" class="btn btn-primary">Save Character</button>
          {% endif %}
        </div>
      </form>
    </div>
  </div>

  <!-- Character List -->
  {% if characters %}
  <div class="card">
    <div class="card-header">
      <h5 class="mb-0">Your Saved Characters</h5>
    </div>
    <ul class="list-group list-group-flush">
      {% for c in characters %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ c.name }}</strong> â€” Level {{ c.level }}  
          <small class="text-muted">HP: {{ c.health }} | Mana: {{ c.mana }}</small>
        </div>
        {% if not guest_mode %}
        <a href="#" class="btn btn-outline-danger btn-sm">Delete</a>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </div>
  {% else %}
  <p class="text-muted mt-3">No saved characters yet.</p>
  {% endif %}
</div>

{% endblock %}
